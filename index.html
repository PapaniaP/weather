<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>What's The Weather Like?</title>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<div class="card">
			<div class="search">
				<input type="text" placeholder="Enter City Name" spellcheck="false" />
				<button>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 24 24"
						fill="currentColor"
						aria-hidden="true"
					>
						<path
							fill-rule="evenodd"
							d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z"
							clip-rule="evenodd"
						/>
					</svg>
				</button>
			</div>

			<div class="error">
				<p>Invalid City Name</p>
			</div>
			<div class="weather">
				<img src="images/rain.png" class="weather-icon" />
				<h1 class="temp">17 °C</h1>
				<h2 class="city">Johannesburg</h2>
				<div class="details">
					<div class="col">
						<img src="/images/humidity.png" />
						<div>
							<p class="humidity">50%</p>
							<p>Humidity</p>
						</div>
					</div>
					<div class="col">
						<img src="/images/wind.png" />
						<div>
							<p class="wind">12 km/h</p>
							<p>Wind Speed</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			const apiKey = "129876e1fd2c72a0e7f804c68e0d207e";
			const apiUrl =
				"https://api.openweathermap.org/data/2.5/weather?=&units=metric&q=";

			const searchBox = document.querySelector(".search input");
			const searchBtn = document.querySelector(".search button");
			const weatherIcon = document.querySelector(".weather-icon");

			async function checkWeather(city) {
				const response = await fetch(apiUrl + city + `&appid=${apiKey}`);
				if (response.status == 404) {
					document.querySelector(".error").style.display = "block";
					document.querySelector(".weather").style.display = "none";
				} else {
					var data = await response.json();

					document.querySelector(".city").innerHTML = data.name;
					document.querySelector(".temp").innerHTML =
						Math.round(data.main.temp) + "°C";
					document.querySelector(".humidity").innerHTML =
						data.main.humidity + "%";
					document.querySelector(".wind").innerHTML = data.wind.speed + " km/h";

					if (data.weather[0].main == "Clouds") {
						weatherIcon.src = "images/clouds.png";
					} else if (data.weather[0].main == "Clear") {
						weatherIcon.src = "images/clear.png";
					} else if (data.weather[0].main == "Rain") {
						weatherIcon.src = "images/rain.png";
					} else if (data.weather[0].main == "Miat") {
						weatherIcon.src = "images/mist.png";
					} else if (data.weather[0].main == "Drizzle") {
						weatherIcon.src = "images/drizzle.png";
					}
					document.querySelector(".weather").style.display = "block";
					document.querySelector(".error").style.display = "none";
				}
			}

			searchBtn.addEventListener("click", () => {
				checkWeather(searchBox.value);
			});
		</script>
	</body>
</html>
